## Git Rule 4: Формирование коммитов рефакторинга


К рефакторингу относятся изменения, которые не влияют на логический результат работы кода,
а влияют только на его качество.

Простота, которую предоставляет IDE для рефакторинга, меняет восприятие разработчика на сложность внесенных в код 
изменений. Это приводит к сложности чтения и проведения ревью коммитов, связанных с рефакторингом.
Чтобы решить проблему, предлагается следовать следующим правилам для формирования коммитов во время рефакторинга:

- Во время разбиения на коммиты заботиться о человеке, который будет выполнять ревью этих изменений.
  То есть проводить ревью изменений по каждому рефакторингу должно быть так же легко, как и выполнять их.


- Не смешивать в коммитах изменения, которые влияют на логический результат работы кода, и рефакторинг.

  - Если в рамках бизнес-задачи вам необходимо переработать участок имеющегося кода, например, для его
    переиспользования, то перед тестом коммита нужно добавить `(Реф)`.
    ```
    HRL-1 (Реф) Вынесен метод обработки процесса логина
    ```
    
  - Воздержаться от изменений, которых не требует реализация текущей бизнес задачи, вместо них - создать
    отдельную задачу по рефакториингу.


- Писать в сообщении коммита всё, что было изменено в рамках коммита. Если появляется желание оформить описание 
  в виде списка изменений, то стоит задуматься над разбиением на отдельные коммиты.

  - "Правки после ревью" - это пример плохого сообщения коммита. Оно не отражают суть изменений и позволяет
    смешивать в одном коммите слишком много разнообразных изменений.

  - "Доработки оформления" - допустимое сообщение, если в нём содержатся только несколько однотипных правок, не
    меняющих ни логику кода, ни смысловое значение комментариев.
    
  - "Добавлены переносы строк" - точное и ясное сообщение коммита.


- Любой рефакторинг, подразумевающий изменения сразу в нескольких участках/файлах кода, должен быть в отдельном коммите.
  Примеры изменений, которые точно должны быть в отдельных коммитах:
  
  - Перемещение файла или группы файлов из одной общей папки в другую общую папку средствами IDE.
  - Переименование метода, который используется в разных местах, средствами IDE.
  - Удаление сущностей средствами IDE.
  - Замена одной повторяющейся фразы в комментариях кода на другую с помощью "replace all" или поиском по проекту.
  
- Не уходить в крайность и не разбивать коммиты слишком сильно. Примеры:
  - Перемещение множества файлов из одной общей для всех этих файлов папки в другую общую для всех этих файлов папки не стоит разбивать на несколько разных коммитов по каждому файлу.
  - Разнообразные правки *оформления* комментариев можно оставлять в одном коммите. Но, опять же, если правки уже не только по оформлению и массовые, то стоит разбить.
